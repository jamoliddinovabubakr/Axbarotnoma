{% extends "user_app/base.html" %}
{% load i18n %}
{% block title %}
    {% trans "Journal Dashboard" %}
{% endblock %}
{% block content %}
    <div id="content" class="content">
        <h2 class="page-header viewArticleFont">
            {% trans "Journal Dashboard" %}
        </h2>
        <div class="panel-body forshadow" style="background-color: #ffffff; border-radius: 5px; padding: 15px">
            <div class="container">
                <h3>Journals List</h3>
                <div class="row">
                    <hr>
                    <div class="col-lg-12">
                        <button type="button" style="float: right"
                                data-url="{% url 'create_journal' %}"
                                {% if articles.count == 0 %} disabled {% endif %}
                                class="btn btn-success btn-sm forshadow create_journal_btn"><i
                                class="fa fa-plus mr-1"></i>Create New Journal
                        </button>
                    </div>
                </div>
                <hr>
                <table class="table table-hover table-fixed">

                    <thead>
                    <tr>
                        <th><strong>TR</strong></th>
                        <th><strong>NAME</strong></th>
                        <th><strong>YEAR</strong></th>
                        <th><strong>NUMBER</strong></th>
                        <th><strong>FILE</strong></th>
                        <th><strong>CREATED AT</strong></th>
                        <th><strong>UPDATED AT</strong></th>
                        <th><strong>IS PUBLISH</strong></th>
                        <th><strong>STATUS</strong></th>
                        <th><strong>ACTION</strong></th>
                    </tr>
                    </thead>

                    <tbody>
                    {% if journals.count > 0 %}
                        {% for journal in journals %}
                            <tr>
                                <th scope="row">{{ forloop.counter }}</th>
                                <td>{{ journal.name }}</td>
                                <td>{{ journal.year }}</td>
                                <td>{{ journal.number }}</td>
                                <td>
                                    <a href="{{ journal.file_pdf.url }}">Pdf</a>
                                </td>
                                <td>{{ journal.created_at }}</td>
                                <td>{{ journal.updated_at }}</td>

                                <td>
                                    {% if journal.is_publish %}
                                        <span class='badge badge-success'>Yes</span>
                                    {% else %}
                                        <span class='badge badge-danger'>No</span>
                                    {% endif %}
                                </td>
                                <td>
                                    {% if journal.status %}
                                        <span class='badge badge-success'>Yes</span>
                                    {% else %}
                                        <span class='badge badge-danger'>No</span>
                                    {% endif %}
                                </td>
                                <td><a href="{% url 'view_journal' journal.id %}" class="btn btn-outline-warning"><i class="fa fa-pen"></i></a></td>
                            </tr>
                        {% endfor %}
                    {% else %}
                        <tr>
                            <td colspan="10"><h3 class="text-lg-center text-danger">NO DATA</h3></td>
                        </tr>
                    {% endif %}
                    </tbody>
                </table>
            </div>
        </div>
        <br>
        <div class="panel-body forshadow" style="background-color: #ffffff; border-radius: 5px; padding: 15px">
            <div class="panel-group">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">
                            <a data-toggle="collapse" href="#collapse1"><h5>Articles Ready For Publish</h5></a>
                        </h4>
                    </div>
                    <div id="collapse1" class="panel-collapse collapse">
                        <div class="panel-body">
                            <div class="container">
                                <h4>Article List</h4>
                                <hr>
                                <table class="table table-hover table-fixed">

                                    <thead>
                                    <tr>
                                        <th><strong>TR</strong></th>
                                        <th><strong>EMAIL</strong></th>
                                        <th><strong>TITLE</strong></th>
                                        <th><strong>CREATED AT</strong></th>
                                        <th><strong>STATUS</strong></th>
                                        <th><strong>PUBLISH</strong></th>
                                    </tr>
                                    </thead>

                                    <tbody>
                                    {% if articles.count > 0 %}
                                        {% for article in articles %}
                                            <tr>
                                                <th scope="row">{{ forloop.counter }}</th>
                                                <td>{{ article.author.email }}</td>
                                                <td>{{ article.title }}</td>
                                                <td>{{ article.created_at }}</td>

                                                <td>
                                                    {% if article.is_publish %}
                                                        <span class='badge badge-success'>Yes</span>
                                                    {% else %}
                                                        <span class='badge badge-danger'>No</span>
                                                    {% endif %}
                                                </td>
                                                <td>
                                                    {% if article.is_publish_journal %}
                                                        <span class='badge badge-success'>Yes</span>
                                                    {% else %}
                                                        <span class='badge badge-danger'>No</span>
                                                    {% endif %}
                                                </td>
                                            </tr>
                                        {% endfor %}
                                    {% else %}
                                        <tr>
                                            <td colspan="10"><h3 class="text-lg-center text-danger">NO DATA</h3></td>
                                        </tr>
                                    {% endif %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="panel-footer">Count: {{ articles.count }}</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="create_journal_div"></div>
{% endblock %}
